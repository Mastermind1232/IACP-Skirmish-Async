---
description: DC/CC ability text and populating figures from card images (dice symbols, passives vs surge, defense, recover)
globs: data/dc-effects.json, data/cc-effects.json
alwaysApply: false
---

# Updated card images: full read and update

**Unless the user says otherwise**, whenever they provide an updated card image for a DC (or CC), you must:

1. **Fully read the card** from the image/description: cost, sub-cost, health, speed, figures, attack (dice colors and type: Ranged/Melee), defense (white or black — read from the card, do not infer from faction), passives, surge abilities, ability text, keywords, subname, affiliation, elite.
2. **Update all relevant fields**: copy the image to the correct path, update `dc-images.json` if the path or extension changes, and update `data/dc-effects.json` with complete data (abilityText, keywords, cost, health, speed, figures, attack, defense, passives, surgeAbilities, subname, affiliation, elite, etc.). Add or update `dc-stats.json` if the project uses it for that figure.
3. **Do not do a partial update** (e.g. image only or one field). Treat every updated card image as a request to sync the full card data from the image.

If anything on the card is unclear, say what is uncertain and leave that field blank or unchanged rather than guessing.

---

# Ability text: spell out dice result types

When editing `abilityText` or `effect` in DC/CC data, **never leave a dice result as a blank or "the results"**. Cards show symbols; in plain text we spell out the result type.

- **Correct**: "suffers Damage equal to the **Hit** results", "Strain equal to the **Surge** results"
- **Wrong**: "Damage equal to the Damage results", "Damage equal to the results", "suffers Damage equal to the ___"

**Critical distinction:**
- **Hits** = what the dice show (the die face icon — the explosion/starburst symbol on attack dice)
- **Damage** = the outcome suffered by the target (the effect, not the die face)
- So the pattern is always: "suffers **Damage** equal to the **Hit** results" — NEVER "Damage equal to the Damage results"
- Other die faces: **Surge** (zigzag), **Block** (shield), **Evade** (dodge). Use these for their respective die face symbols.
- If the card says "combined Hit and Surge results", keep that. Always fill in the specific result type the card refers to.

---

# Populating DC figures from card images

## Never guess. Ever.

- If you are **not 100% sure** what the card says, **leave that field blank** (or leave the existing placeholder). The user will fill it in and can teach you so you read it better next time.
- You **must tell the user which fields or parts you were not 100% sure on**, so they know where you need help. List them explicitly (e.g. "Uncertain: defense die color, surge symbol in Flawless Execution").
- **Always use the best possible image recognition** when reading card images. These are playing cards with small text; low-quality or ambiguous descriptions are not a basis for filling in data.

## When you are 100% sure (reading guidance)

1. **Defense die (CRITICAL — do not mix up):** White and black are different and affect gameplay. **Never infer defense die from faction** (e.g. do not assume Imperial = black or Rebel = white). Read the actual die icon on the card: **white** = lighter/white die symbol in the Defense stat, **black** = dark/black die symbol. If the image description explicitly says "white defense die" or "black defense die" (or "white square", "black square" for the die icon), use that literally and do not swap. When uncertain, mark "?" and ask the user — do not guess. Mixing white and black is a common error; always double-check this field.
2. **Stat bar: passives vs surges (CRITICAL — read the prefix symbol):**
   - Items in the stat bar that have a **surge symbol (⟋) prefix** = **surge abilities** → go in `surgeAbilities`
   - Items in the stat bar with **NO prefix symbol** = **passives** → go in `passives`
   - **Read EACH item individually.** Check whether it has ⟋ in front. Do NOT assume all items in the same row are the same type.
   - **Read the exact number.** "+1" is not "+2". Read the actual digit on the card.
   - Common passives: "+2 Accuracy", "+3 Accuracy", "Reach", "Pierce 1", "Cleave 1", "Mobile", "Professional"
   - Common surges: "⟋: +2 Hits", "⟋: Pierce 3", "⟋: +1 Hit, Hide"
   - If no passives exist, do not add `passives` at all. If no surges exist, do not add `surgeAbilities` at all.
3. **Recover: Damage vs tokens:** Recover Damage (heart) = `recover 1`. Recover Block Token (shield) = `recover 1 block token`. Read the symbol.
4. **Ability text:** Spell out dice/symbol names (Hit, Surge, Focus, etc.) as in the first section above.
5. **Ability prefix check (mandatory per-ability — check ALL prefix types):** For **every** named ability on the card, check whether it has ANY prefix symbol. This check must happen for **each ability individually** — do not batch-skip it. **This applies to ALL cards you touch, even ones with pre-existing data — always re-verify prefixes.**
   - **⇒ (Special Action icon)** = costs 1 action → format: **Special Action (Ability Name):**
     - Visually: a double-triangle / connected-arrow icon (◄►) — this is ONE symbol meaning ONE special action, not two separate arrows. If you see this icon before an ability name, it is ALWAYS a Special Action.
   - **⇒⇒ (2 of the above icon)** = costs 2 actions → format: **Double Action (Ability Name):**
   - **⟋ (surge zigzag)** = costs 1 surge token → format: **Surge (Ability Name):**
   - **⇒ + ⟋ (both)** = costs 1 action + 1 surge → format: **Special Action Surge (Ability Name):**
   - **NEVER** write "Special Action Special Action" — that is always wrong.
   - **Abilities with NO prefix symbol** are passive/triggered abilities — just write **Ability Name:**
   - Movement abilities (e.g. "Lift Off", "Jump", "Fly") are especially likely to be special actions — double-check these. If you are not 100% sure, list it in uncertainties.
6. **Tokens/symbols:** Surge (starburst) ≠ Focus (focus token) ≠ Power Token. **Question mark on a token background** = generic **Power Token** (player chooses any: Block, Hit, Surge, Evade, etc.). Write "gain 1 Power Token". Read the actual symbol.
7. **Elite flag:** Check the **cost number color**. Red = elite → add `"elite": true`. Grey/white = not elite → do not add the field. ALL unique characters with red cost numbers are elite. ALL "(Elite)" group cards are elite.
8. **Figure count from notches:** Below the cost number on the left edge, count the small notch marks. Red notches = elite, grey notches = regular. Number of notches = number of figures. Always check and record this.
9. **New surge combos:** If a card has a surge combination not yet in the editor dropdown, add it to both the `<option>` list and `SURGE_LABELS` in `dc-effect-editor.html`. Use "Hit" not "Damage" in display labels.

## Mandatory visible checklist (output to user for EVERY card)

Before making ANY edit to a card's data, you MUST output the following checklist to the user. Do not skip this. Do not batch multiple cards into one edit without showing a separate checklist for each card first. If any item is uncertain, mark it with "?" and do NOT fill in that field — tell the user.

```
CARD: [Card Name]
- Cost color: red (elite) / grey (not elite)
- Notch count: ___ notches, color: red/grey → figures: ___
- Dice count: ___ icons seen → ___ colors listed (match? yes/no)
- Dice colors (L→R): die 1 = ___, die 2 = ___, die 3 = ___
- Blue/green confusion check: confirmed ___ (not ___)
- Yellow die check: present / not present / double-checked
- Attack type icon: melee (fist) / ranged (blaster) — confirmed
- Defense die: white / black — confirmed (read from card; do NOT infer from faction)
- Health: ___
- Speed: ___
- Cost: ___
- Stat bar items (check EACH for ⟋ prefix):
  - Item 1: has ⟋ prefix? yes/no → passive or surge? → value: ___
  - Item 2: has ⟋ prefix? yes/no → passive or surge? → value: ___
  - Item 3: has ⟋ prefix? yes/no → passive or surge? → value: ___
  - ...
- Ability prefix check (per ability — check for ⇒, ⇒⇒, ⟋, or none):
  - [Ability 1]: prefix = ⇒ / ⇒⇒ / ⟋ / ⇒+⟋ / none
  - [Ability 2]: prefix = ⇒ / ⇒⇒ / ⟋ / ⇒+⟋ / none
  - ...
- Uncertainties: [list any, or "none"]
```

**Rules:**
- One card at a time. Show checklist → make edit → next card.
- Every number must be read from the card, not inferred. Read the actual digit.
- Never resolve uncertainty by reasoning. If unsure whether a die is "red or blue" or "green or yellow", flag it — do not pick based on game design logic.
- Blue vs green: Blue is darker/cooler; green is lighter/warmer. Always double-check.
- Yellow dice blend into backgrounds — if cost is 5+ with only 2 dice, re-examine for yellow.
- If uncertain about ANY field, flag it and leave it blank. The user will fill it in.
- **Elite flag is non-negotiable.** Every card must be checked for red vs grey cost. Red = `"elite": true`. If you see "(Elite)" in the name, it must also have `"elite": true`.
- **Stat bar items must be checked individually for ⟋.** Do not assume they are all surges or all passives. Each item is independent.
- **Ability prefixes must be checked individually.** For each named ability, look for ⇒, ⇒⇒, or ⟋ immediately before the name. Missing a prefix is a data error.
- **Surge values in `surgeAbilities`** use the internal format (e.g., `"damage 2"`, `"pierce 3"`, `"accuracy 2"`, `"damage 2, hide"`). Display labels use "Hit/Hits" but internal keys use "damage".

---

# Trait and token wording (canonical form)

- **Heavy Weapon** — Always two words with a space. Never "HeavyWeapon" or "HEAVYWEAPON" in text; use "HEAVY WEAPON" (or "Heavy Weapon" where title case applies).
- **Force User** — Always two words with a space. Never "ForceUser" or "FORCEUSER"; use "FORCE USER" (or "Force User" where title case applies).
- **Power Token** — Always capitalized (both words). Even if the card uses lowercase, in our data use "Power Token". Never "power token" or "Power token".
- **Ranged and Melee** — When referring to attack type in ability text or display, always capitalize: **Ranged**, **Melee**. Use "Ranged attack", "Melee attack", "during a Ranged attack", etc. (The internal `attack.type` value in JSON stays lowercase `"range"` / `"melee"`.)
